<template>
    <!-- HEADER -->
    <div class="slds-modal__header slds-text-heading_large">
        Add Work Records
    </div>
    <!-- BODY -->
    <div class="slds-p-around_medium">
        <template for:each={work} for:item="workRow">
            <div key={workRow.tempId} class="slds-box slds-m-bottom_medium slds-theme_default">

                <!-- Row of Inputs, Each One Takes Full Width on Mobile -->
                <div class="slds-grid slds-wrap slds-gutters">
                    <!-- Type -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-combobox
                            name="Type__c"
                            label="Type *"
                            data-temp-id={workRow.tempId}
                            data-field="Type__c"
                            options={typeOptions}
                            onchange={elementChangeHandler}
                            required>
                        </lightning-combobox>
                    </div>
                    <!-- Location -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            name="ozbeellc__Location__c"
                            label="Location *"
                            data-temp-id={workRow.tempId}
                            data-field="ozbeellc__Location__c"
                            onchange={elementChangeHandler}
                            required>
                        </lightning-input>
                    </div>
                    
                    <!-- Quantity -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            name="ozbeellc__Quantity__c"
                            label="Quantity *"
                            type="number"
                            data-temp-id={workRow.tempId}
                            data-field="ozbeellc__Quantity__c"
                            onchange={elementChangeHandler}
                            required>
                        </lightning-input>
                    </div>
                    <!--Man Hours To Reapir-->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            name="ozbeellc__Man_Hours_To_Repair__c"
                            label="Man Hours To Repair *"
                            type="number"
                            data-temp-id={workRow.tempId}
                            data-field="ozbeellc__Man_Hours_To_Repair__c"
                            onchange={elementChangeHandler}
                            required>
                        </lightning-input>
                    </div>

                    <!-- Deficiency -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-record-picker
                            object-api-name="ozbeellc__Deficiency__c"
                            label="Deficiency *"
                            display-info={displayInfo}
                            matching-info={matchingInfo}
                            value={workRow.ozbeellc__Deficiency__c}
                            placeholder="Search Deficiencies..."
                            onchange={elementChangeHandler}
                            data-temp-id={workRow.tempId}
                            data-field="ozbeellc__Deficiency__c"
                            required>
                        </lightning-record-picker>
                    </div>
                    <!-- Delete Button -->
                    <div class="slds-col slds-size_1-of-1 slds-text-align_right slds-m-top_small">
                        <lightning-button-icon
                            icon-name="utility:delete"
                            alternative-text="Delete"
                            data-temp-id={workRow.tempId}
                            onclick={deleteRow}
                            title="Delete row">
                        </lightning-button-icon>
                    </div>
                </div>
            </div>
        </template>
        <!-- Add New Work Record Button -->
        <div class="slds-text-align_right slds-m-bottom_medium">
            <lightning-button-icon icon-name="utility:add"
                title="Add New Work Record"
                onclick={addRow}>
            </lightning-button-icon>
        </div>
    </div>

    <!-- FOOTER -->
    <div class="slds-modal__footer slds-text-align_right">
        <lightning-button label="Save" variant="brand" onclick={submitClickHandler}></lightning-button>
    </div>
</template>