<template>
    <div class="component-background">
        <lightning-card>
            <div class="slds-m-around_medium">

                <!-- Header Actions -->
                <lightning-layout horizontal-align="spread" class="slds-var-p-horizontal_xx-small slds-wrap">
                    <lightning-layout-item>
                        <lightning-button variant="base" data-id="cancel" label="Cancel" type="button" onclick={dismiss}
                            class="button"></lightning-button>
                    </lightning-layout-item>

                    <lightning-layout-item class="slds-align_absolute-center slds-p-top_x-small">
                        <h2 class="slds-text-heading_medium">Update Work Status</h2>
                    </lightning-layout-item>

                    <lightning-layout-item>
                        <lightning-button variant="base" data-id="submit" label="Save All" type="submit"
                            onclick={handleMassUpdate}
                            class="button-primary"></lightning-button>
                    </lightning-layout-item>
                </lightning-layout>

                <lightning-messages></lightning-messages>

                <!-- Records -->
                <template for:each={workRecords} for:item="workRecord">
                    <lightning-record-edit-form key={workRecord.id}
                        object-api-name="ozbeellc__Work_Performed__c"
                        record-id={workRecord.id}
                        onsuccess={onSuccess}
                        class="slds-box slds-m-top_medium slds-theme_default">

                        <div class="slds-grid slds-wrap slds-gutters">

                            <!-- Editable Status -->
                            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                                <lightning-input-field field-name="Status__c" value={workRecord.Status__c}></lightning-input-field>
                            </div>

                            <!-- Read-only fields using lightning-output-field -->
                            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                                <lightning-output-field field-name="Type__c" value={workRecord.Type__c}></lightning-output-field>
                            </div>

                            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                                <lightning-output-field field-name="ozbeellc__Location__c" value={workRecord.ozbeellc__Location__c}></lightning-output-field>
                            </div>

                            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                                <lightning-output-field field-name="ozbeellc__Quantity__c" value={workRecord.ozbeellc__Quantity__c}></lightning-output-field>
                            </div>

                            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                                <lightning-output-field field-name="ozbeellc__Deficiency__c" value={workRecord.ozbeellc__Deficiency__c}></lightning-output-field>
                            </div>

                        </div>
                    </lightning-record-edit-form>
                </template>
            </div>
        </lightning-card>
    </div>
</template>